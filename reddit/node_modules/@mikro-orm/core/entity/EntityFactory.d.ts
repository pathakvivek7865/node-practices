import { EntityData, EntityName, New, Populate, Primary } from '../typings';
import { UnitOfWork } from '../unit-of-work';
import { EntityManager } from '../EntityManager';
export interface FactoryOptions {
    initialized?: boolean;
    newEntity?: boolean;
    merge?: boolean;
    convertCustomTypes?: boolean;
}
export declare class EntityFactory {
    private readonly unitOfWork;
    private readonly em;
    private readonly driver;
    private readonly config;
    private readonly metadata;
    private readonly hydrator;
    constructor(unitOfWork: UnitOfWork, em: EntityManager);
    create<T, P extends Populate<T> = keyof T>(entityName: EntityName<T>, data: EntityData<T>, options?: FactoryOptions): New<T, P>;
    createReference<T>(entityName: EntityName<T>, id: Primary<T> | Primary<T>[] | Record<string, Primary<T>>, options?: Pick<FactoryOptions, 'merge' | 'convertCustomTypes'>): T;
    private createEntity;
    private processDiscriminatorColumn;
    /**
     * denormalize PK to value required by driver (e.g. ObjectId)
     */
    private denormalizePrimaryKey;
    /**
     * returns parameters for entity constructor, creating references from plain ids
     */
    private extractConstructorParams;
    private runHooks;
}
